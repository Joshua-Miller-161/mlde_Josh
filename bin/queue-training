#!/usr/bin/bash
# setup jobs for training a model

set -euo pipefail

model_run_id=$1
cpm_dataset=$2
shift 2
# Add any other config on the commandline for training
# --config.model.map_features=8

training_duration=15

set -x

# train

lbatch -g 1 -m 16 -q gpu,cnu -t ${training_duration} --condaenv cuda-downscaling -- python main.py --workdir /user/work/vf20964/score-sde/workdirs/subvpsde/xarray_cncsnpp_continuous/${model_run_id} --config configs/subvp/xarray_cncsnpp_continuous.py --config.data.dataset_name=${cpm_dataset} $@ --mode train
